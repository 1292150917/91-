// jQuery flexImages v1.0.4
// https://github.com/Pixabay/jQuery-flexImages
!function(t){function e(t,a,n,r){function o(t){n.maxRows&&f>n.maxRows||n.truncate&&t&&f>1?w[g][0].style.display="none":(w[g][0].style.width=l+"px",w[g][0].style.height=u+"px",w[g][0].style.display="block")}var g,l,d=1,f=1,s=t.width()-2,w=[],c=0,u=n.rowHeight;for(s||(s=t.width()-2),i=0;i<a.length;i++)if(w.push(a[i]),c+=a[i][2]+n.margin,c>=s){var m=w.length*n.margin;for(d=(s-m)/(c-m),u=Math.ceil(n.rowHeight*d),exact_w=0,l,g=0;g<w.length;g++)l=Math.ceil(w[g][2]*d),exact_w+=l+n.margin,exact_w>s&&(l-=exact_w-s),o();w=[],c=0,f++}for(g=0;g<w.length;g++)l=Math.floor(w[g][2]*d),h=Math.floor(n.rowHeight*d),o(!0);r||s==t.width()||e(t,a,n,!0)}t.fn.flexImages=function(a){var i=t.extend({container:".item",object:"img",rowHeight:180,maxRows:0,truncate:0},a);return this.each(function(){var a=t(this),n=t(a).find(i.container),r=[],o=(new Date).getTime(),h=window.getComputedStyle?getComputedStyle(n[0],null):n[0].currentStyle;for(i.margin=(parseInt(h.marginLeft)||0)+(parseInt(h.marginRight)||0)+(Math.round(parseFloat(h.borderLeftWidth))||0)+(Math.round(parseFloat(h.borderRightWidth))||0),j=0;j<n.length;j++){var g=n[j],l=parseInt(g.getAttribute("data-w")),d=l*(i.rowHeight/parseInt(g.getAttribute("data-h"))),f=t(g).find(i.object);r.push([g,l,d,f,f.data("src")])}e(a,r,i),t(window).off("resize.flexImages"+a.data("flex-t")),t(window).on("resize.flexImages"+o,function(){e(a,r,i)}),a.data("flex-t",o)})}}(jQuery);